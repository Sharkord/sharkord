services:
  sharkord:
    image: sharkord/sharkord:latest
    container_name: sharkord
    restart: unless-stopped
    ports:
      # Main HTTP/WebSocket port
      - "4991:4991"
      
      # WebRTC media port (UDP/TCP) - using multiplexed mode
      # Single port for all voice/video connections
      - "7882:7882/tcp"
      - "7882:7882/udp"
    
    # Can override config file settings
    environment:

      # Server configuration
      SHARKORD_PORT: "4991"
      SHARKORD_DEBUG: "false"
      
      # Mediasoup/Voice configuration (multiplexed mode)
      SHARKORD_RTC_MIN_PORT: "7882"
      SHARKORD_RTC_MAX_PORT: "7882"
      
      # Optional: Custom WebRTC host/IP for NAT, K8s LoadBalancer, etc
      # Uncomment and set to override auto-detected public IP
      # SHARKORD_WEBRTC_HOST: "webrtc.yourdomain.com"
    
    # Volume mounts for persistent data
    volumes:
      # Map to host directory
      - ./data:/root/.config/sharkord

      # Or use Docker volumes
      # - sharkord_data:/root/.config/sharkord
      
      # Uploads directory (optional, if you want uploads outside data dir)
      # - sharkord_uploads:/root/.config/sharkord/uploads
      
      # Plugins directory (optional, for plugin management)
      # - sharkord_plugins:/root/.config/sharkord/plugins

# If using Docker volumes:
# volumes:
#   sharkord_data:
#     driver: local
